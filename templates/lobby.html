
{{define "lobby"}}
<div id="lobby" class="w-md">
    <h1 class="text-white">Lobby</h1>
    {{if .RoomCode}}
    <div class="flex flex-col items-center gap-3 mb-4">
        <div class="text-white text-lg font-bold text-center">
            Room: <span class="text-2xl tracking-widest bg-white/20 px-3 py-1 rounded-lg">{{.RoomCode}}</span>
        </div>
        <div id="qr-code" class="bg-white p-2 rounded-lg" style="width:80px; height:80px;"></div>
        <div class="flex flex-row gap-2">
            <button type="button" id="share-btn" onclick="shareRoom()"
                class="bg-blue-500 hover:bg-blue-600 text-white text-sm font-bold py-2 px-4 rounded-lg cursor-pointer">
                Share Invite
            </button>
            <button type="button" id="copy-btn" onclick="copyRoomLink()"
                class="bg-white/20 hover:bg-white/30 text-white text-sm font-bold py-2 px-4 rounded-lg cursor-pointer">
                Copy Link
            </button>
        </div>
    </div>
    {{end}}
    <div id="lobby_players" class="w-md flex flex-col gap-2 mb-4">
        {{range .Players}}
            {{template "lobbyPlayer" .}}
        {{end}}
        <div sse-swap="newPlayer" hx-swap="beforeend"></div>
    </div>
    <div class="mb-20">
        <input id="ready_input" type="hidden" name="ready" value="{{if eq .Player.Ready true}}wait{{else}}ready{{end}}"/>
        <button id="ready_button" type="submit" hx-post="/room/ready" hx-include="[name='ready']" hx-swap="none">
            {{if eq .Player.Ready true}}Wait! Hold on a sec!{{else}}I'm Ready!{{end}}
        </button>
        <div class="mt-3 text-center">
            <button type="button" hx-post="/room/leave" hx-swap="none"
                class="text-white/50 hover:text-white/80 text-sm underline cursor-pointer bg-transparent border-none">
                Leave Room
            </button>
        </div>
    </div>
</div>
{{end}}

{{define "lobbyPlayer"}}
<div id="lobby_player{{.ID}}" class="flex flex-row items-center gap-3 bg-white/20 backdrop-blur-sm rounded-lg px-4 py-3 text-white w-full">
    <div class="w-4 h-4 rounded-full" style="background-color:{{.Color}}"></div>
    <div class="grow font-bold">{{.Name}}</div>
    <div id="lobby_player_ready{{.ID}}" class="text-sm italic opacity-80">{{if eq .Ready true}}Let's Go!{{else}}waiting for player{{end}}</div>
</div>
{{end}}

{{define "lobbyCountdown"}}
<div class="countdown-overlay">
    <h1 class="text-white">GET READY</h1>
    <span id="countdown_num">{{.}}</span>
</div>
{{end}}
